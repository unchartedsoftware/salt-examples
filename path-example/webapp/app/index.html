<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Salt Path Example</title>
    <meta name="description" content="Example application using Salt to generate Bin tiles">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css" />
    <style>
      #map, html, body {
        width: 100%; height: 100%; padding: 0; margin: 0;
      }
    </style>
  </head>

  <body>
    <div id="map"></div>
  </body>

  <script src="http://cdn.leafletjs.com/leaflet/v1.0.0-rc.1/leaflet.js"></script>
  <script src="/vendor/@uncharted/salt/dist/salt.js"></script>

  <script>
    // Map control
    var map = new L.Map('map', {
      zoomControl: true,
      center: [40.7, -73.9],
      zoom: 10,
      maxZoom: 13
    });

    // Base map
    L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
      attribution: 'CartoDB'
    }).addTo(map);

    // Get the databounds to provide to canvas layer
    salt.xhr.get('./meta/paths/meta.json', {}, function(meta) {

      // Create a canvas layer to render the .bins files
      var saltLayerTemperature = new salt.CanvasLayer('./tiles/paths/{z}/{x}/{y}.bins', {
        // Use the "temperature" color ramp
        ramp: 'temperature',
        // Transform data -> color using a log scale
        transform: 'log10',
        // Spread the range of the color ramp across the entire range of the data
        dynamicRange: [0,1],
        // Provide the zoom-level-wide data bounds
        dataBounds: meta
      });
      map.addLayer(saltLayerTemperature);
    });

  </script>
</html>
